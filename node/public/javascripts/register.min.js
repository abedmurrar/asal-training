const usernameRegex=/^[a-z](([\w][\.\-]{0,1}){6,22})[a-z]$/,emailRegex=/^[\w]([\w][\.\-]{0,1}?)+\@([a-z0-9][_\.\-]{0,1}?)+\.([a-z]{2,5})$/,passwordRegex=/^.{7,}$/;function response(r){r.success||(r.username?($("#username").addClass("error").removeClass("correct"),$(".username-msg").html(r.username)):($("#username").addClass("correct"),$(".username-msg").html("Valid username").addClass("correct-hint").removeClass("error-hint")),r.password?($("#password").addClass("error").removeClass("correct"),$(".password-msg").html(r.password)):($("#password").addClass("correct"),$(".password-msg").html("Valid password").addClass("correct-hint").removeClass("error-hint")),r.email?($("#email").addClass("error").removeClass("correct"),$(".email-msg").html(r.email)):($("#email").addClass("correct").removeClass("error"),$(".email-msg").html("Valid email").addClass("correct-hint").removeClass("error-hint")))}$("#username").on("keydown",function(){$(this).removeClass("error").removeClass("correct"),$(".username-msg").html("Enter your username").removeClass("error-hint").removeClass("correct-hint")}),$("#password").on("keydown",function(){$(this).removeClass("error").removeClass("correct"),$(".password-msg").html("Enter your password").removeClass("error-hint").removeClass("correct-hint")}),$("#email").on("keydown",function(){$(this).removeClass("error").removeClass("correct"),$(".email-msg").html("Enter your Email").removeClass("error-hint").removeClass("correct-hint")}),$("#registerForm").on("submit",r=>{r.preventDefault();var e=$("#username").val().trim(),s=$("#password").val().trim(),a=$("#email").val().trim(),o=!0;""!=e&&usernameRegex.test(e)||(o=!1,$("#username").addClass("error"),$(".username-msg").html("Invalid username").addClass("error-hint")),""!=s&&passwordRegex.test(s)||(o=!1,$("#password").addClass("error"),$(".password-msg").html("Invalid password").addClass("error-hint")),""!=a&&emailRegex.test(a)||(o=!1,$("#email").addClass("error"),$(".email-msg").html("Invalid email").addClass("error-hint")),o&&$.ajax({url:"/users/",method:"post",data:$("#registerForm").serialize(),success:r=>{$("#registerForm")[0].reset(),$("#msg").html(r.message+', <a href="/login">login</a> now').addClass("correct-hint")},error:r=>{response(JSON.parse(r.responseText))}})});